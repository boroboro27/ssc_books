{% extends 'base.html' %}
 
{% block content %} 
{{ super() }} 
{% for cat, msg in get_flashed_messages(True) %}
<div class="flash {{cat}}">{{msg}}</div>
{% endfor %}
<p><label>Книги, которые сейчас у меня на руках: </label></p>
<table>
  <thead>
    <tr>
      <th>ID книги</th>
      <th>Название</th>
      <th>Автор</th>
      <th>Год издания</th>
      <th>Жанр</th>
      <th>Дата добавления</th>
      <th>Действия</th>
    </tr>
  </thead>
  <tbody>
    {% for book in books %}
    <tr>      
      <td>{{ book.id }}</td>
      <td>{{ book.title }}</td>
      <td>{{ book.author }}</td>
      <td>{{ book.public_year }}</td>
      <td>{{ book.genre }}</td>
      <td>{{ book.dt }}</td>
      <td>
        {% if book.status == 'available' %}
        <form method="post" action="/take_book/{{ book.id }}">
          <input type="submit" value="Взять книгу">
        </form>
        {% elif book.status == 'taken' %}
        <form method="post" action="/return_book/{{ book.id }}">
          <input type="submit" value="Вернуть книгу">
        </form>
        {% endif %}
      </td>
    </tr>    
    {% endfor %}
  </tbody>
</table>
{% endblock %}